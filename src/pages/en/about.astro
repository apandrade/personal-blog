---
import ContentLayout from '../../layouts/ContentLayout.astro';
import { db } from '../../lib/data';
import { changeLanguage } from 'i18next';

// Switch to English
await changeLanguage('en');

const author = await db.getAuthor();
const pageContent = await db.getPageContent('about', 'en');
---

<ContentLayout 
  title="About Me" 
  description="Learn more about the blog author"
>
  <h1>About Me</h1>

  <div class="author-profile">
    <img src={author.avatar} alt={author.name} class="profile-image" />
    <h2>{author.name}</h2>
    <p class="bio">{author.bio}</p>
    
    <div class="social-links">
      <a href={`mailto:${author.email}`} class="social-link email-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
          <polyline points="22,6 12,13 2,6"></polyline>
        </svg>
        Email
      </a>
      {author.social.github && (
        <a href={`https://github.com/${author.social.github}`} target="_blank" rel="noopener noreferrer">
          GitHub
        </a>
      )}
      {author.social.twitter && (
        <a href={`https://twitter.com/${author.social.twitter}`} target="_blank" rel="noopener noreferrer">
          Twitter
        </a>
      )}
      {author.social.linkedin && (
        <a href={`https://linkedin.com/in/${author.social.linkedin}`} target="_blank" rel="noopener noreferrer">
          LinkedIn
        </a>
      )}
    </div>
  </div>

  <div class="content-section">
    <h2>{pageContent.title}</h2>
    {pageContent.content.map(paragraph => (
      <p>{paragraph}</p>
    ))}
  </div>
</ContentLayout>

<style>
  .author-profile {
    text-align: center;
    padding: 2rem 0;
    border-bottom: 1px solid #e6e6e6;
    margin-bottom: 3rem;
  }

  .profile-image {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 1.5rem;
  }

  .author-profile h2 {
    font-size: 2rem;
    margin: 0 0 1rem 0;
  }

  .bio {
    font-size: 1.125rem;
    color: #666;
    max-width: 600px;
    margin: 0 auto 2rem;
  }

  .social-links {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .social-links a {
    padding: 0.75rem 1.5rem;
    background: #f5f5f5;
    color: #333;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 600;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .social-links a:hover {
    background: #000;
    color: #fff;
  }

  .email-link {
    background: #000;
    color: #fff;
  }

  .email-link:hover {
    background: #333;
  }

  .content-section {
    margin-bottom: 2rem;
  }

  .content-section h2 {
    font-size: 1.75rem;
    margin-bottom: 1rem;
  }

  .content-section p {
    margin-bottom: 1.5rem;
  }
</style>
